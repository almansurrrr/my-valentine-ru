<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞</title>
    <style>
        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #fff0f3;
            font-family: 'Segoe UI', Roboto, sans-serif;
        }

        /* ===================== –ö–û–ù–¢–ï–ô–ù–ï–†–´ ===================== */
        .container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100dvh;          /* dynamic viewport height ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª–∫–∞—Ö */
            height: 100vh;
            padding: clamp(15px, 3vw, 30px);
            text-align: center;
            position: relative;
        }

        /* ===================== –®–ê–ü–ö–ê (–≥–∏—Ñ–∫–∞ + —Ç–µ–∫—Å—Ç) ===================== */
        .content-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.5s cubic-bezier(.4,0,.2,1),
                        opacity 0.5s ease;
            z-index: 10;
            margin-bottom: clamp(15px, 4vh, 40px);
            will-change: transform;          /* GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ */
        }

        .content-area img {
            width: clamp(100px, 30vw, 180px);
            border-radius: 20px;
            margin-bottom: clamp(8px, 2vh, 18px);
        }

        h1 {
            color: #ff4d6d;
            font-size: clamp(1rem, 4.5vw, 1.7rem);
            line-height: 1.35;
            padding: 0 10px;
            transition: font-size 0.3s ease;
        }

        /* ===================== –ö–ù–û–ü–ö–ê ¬´–î–ê¬ª ===================== */
        .yes-wrapper {
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #yesBtn {
            background: linear-gradient(135deg, #ff4d6d 0%, #ff758f 100%);
            color: white;
            padding: clamp(12px, 2.5vh, 18px) clamp(30px, 8vw, 50px);
            font-size: clamp(1rem, 3.5vw, 1.4rem);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 700;
            transition: transform 0.45s cubic-bezier(.34,1.56,.64,1),
                        box-shadow 0.3s ease;
            box-shadow: 0 6px 25px rgba(255,77,109,.35);
            will-change: transform;
            -webkit-user-select: none;
            user-select: none;
        }

        #yesBtn:active {
            box-shadow: 0 2px 10px rgba(255,77,109,.25);
        }

        /* ===================== –ö–ù–û–ü–ö–ê ¬´–ù–ï–¢¬ª ===================== */
        #noBtn {
            background-color: #f8f9fa;
            color: #6c757d;
            border: 1px solid #dee2e6;
            padding: clamp(10px, 1.8vh, 14px) clamp(20px, 5vw, 30px);
            font-size: clamp(0.85rem, 3vw, 1rem);
            border-radius: 15px;
            cursor: pointer;
            position: absolute;
            z-index: 100;
            transition: left 0.35s cubic-bezier(.4,0,.2,1),
                        top 0.35s cubic-bezier(.4,0,.2,1),
                        opacity 0.3s ease;
            white-space: nowrap;
            -webkit-user-select: none;
            user-select: none;
        }

        /* ===================== –≠–ö–†–ê–ù –ü–û–ë–ï–î–´ ===================== */
        #victory {
            background: radial-gradient(circle at 50% 60%, #ffe0e6 0%, #fff0f3 70%);
        }

        #victory img {
            width: clamp(140px, 40vw, 240px);
            border-radius: 20px;
            margin-bottom: clamp(12px, 3vh, 25px);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50%      { transform: scale(1.05); }
        }

        #victory h1 {
            margin-bottom: 5px;
        }

        #resetBtn {
            background-color: #adb5bd;
            color: white;
            padding: 12px 28px;
            font-size: 1rem;
            border: none;
            border-radius: 15px;
            margin-top: clamp(15px, 3vh, 30px);
            cursor: pointer;
            transition: background 0.3s;
        }
        #resetBtn:active { background-color: #868e96; }

        .hidden { display: none !important; }

        /* ===================== –°–ï–†–î–ï–ß–ö–ò ===================== */
        .heart {
            position: fixed;
            bottom: -60px;
            z-index: 9999;
            pointer-events: none;
            opacity: 0;
            animation: heartFloat var(--dur) ease-out forwards;
            animation-delay: var(--delay);
        }

        .heart svg {
            width: var(--size);
            height: var(--size);
            filter: drop-shadow(0 0 4px rgba(255,80,120,.4));
        }

        @keyframes heartFloat {
            0% {
                opacity: 0;
                transform: translateY(0) translateX(0) scale(.4) rotate(0deg);
            }
            10% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform:
                    translateY(calc(-110vh))
                    translateX(var(--drift))
                    scale(var(--end-scale))
                    rotate(var(--rot));
            }
        }

        /* ===================== MEDIA QUERIES ===================== */
        @media (min-width: 768px) {
            .content-area img { width: 180px; }
        }

        @media (max-height: 500px) {
            .content-area img { width: 80px; }
            .content-area { margin-bottom: 10px; }
        }

        /* safe-area –¥–ª—è iPhone —Å —á—ë–ª–∫–æ–π */
        @supports (padding: env(safe-area-inset-bottom)) {
            .container {
                padding-bottom: calc(clamp(15px,3vw,30px) + env(safe-area-inset-bottom));
            }
        }
    </style>
</head>
<body>

    <!-- ============ –û–°–ù–û–í–ù–û–ô –≠–ö–†–ê–ù ============ -->
    <div id="quiz" class="container">
        <div class="content-area" id="headerArea">
            <img
                src="https://media.giphy.com/media/c76IJLufpNwSULPk77/giphy.gif"
                alt="–ö–æ—Ç–∏–∫"
                draggable="false">
            <h1 id="question">–ë—É–¥–µ—à—å –ª–∏ —Ç—ã –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíå</h1>
        </div>

        <div class="yes-wrapper">
            <button id="yesBtn">–î–∞ üíï</button>
        </div>

        <button id="noBtn">–ù–µ—Ç</button>
    </div>

    <!-- ============ –≠–ö–†–ê–ù –ü–û–ë–ï–î–´ ============ -->
    <div id="victory" class="container hidden">
        <img
            src="https://media2.giphy.com/media/DtBHcARLqNAvVnYsyD/giphy.gif"
            alt="–õ—é–±–æ–≤—å"
            draggable="false">
        <h1 style="color:#ff4d6d;">–£—Ä–∞! –Ø —Ç–µ–±—è –æ—á–µ–Ω—å –ª—é–±–ª—é ü•∞‚ù§Ô∏è</h1>
        <button id="resetBtn">–ü–æ–≤—Ç–æ—Ä–∏—Ç—å</button>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–µ—Ä–¥–µ—á–µ–∫ -->
    <div id="heartsBox"></div>

    <script>
    (() => {
        /* ---------- –≠–ª–µ–º–µ–Ω—Ç—ã ---------- */
        const yesBtn     = document.getElementById('yesBtn');
        const noBtn      = document.getElementById('noBtn');
        const resetBtn   = document.getElementById('resetBtn');
        const quiz       = document.getElementById('quiz');
        const victory    = document.getElementById('victory');
        const question   = document.getElementById('question');
        const headerArea = document.getElementById('headerArea');
        const heartsBox  = document.getElementById('heartsBox');

        /* ---------- –°–æ—Å—Ç–æ—è–Ω–∏–µ ---------- */
        let yesScale    = 1;
        let headerScale = 1;
        let phraseIdx   = 0;

        const phrases = [
            '–¢–æ—á–Ω–æ? ü•∫',
            '–ê –µ—Å–ª–∏ –ø–æ–¥—É–º–∞—Ç—å? ü§î',
            '–ù—É –ø–æ–∂–∞–∞–∞–ª—É–π—Å—Ç–∞‚Ä¶ ü•π',
            '–ñ–º–∏ ¬´–î–∞¬ª! üëâüëà',
            '–í—ã—Ö–æ–¥–∞ –Ω–µ—Ç! üíò',
            '–Ø –±—É–¥—É –≥—Ä—É—Å—Ç–∏—Ç—å‚Ä¶ üò¢',
            '–ù—É –¥–∞–≤–∞–∞–∞–π! üôè',
            '–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ! üíó'
        ];

        /* ============================================
           –ö–ù–û–ü–ö–ê ¬´–ù–ï–¢¬ª ‚Äî –Ω–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
        ============================================ */
        function setInitialPos() {
            const yR = yesBtn.getBoundingClientRect();
            let top  = yR.bottom + 20;
            if (top + noBtn.offsetHeight > window.innerHeight - 15) {
                top = yR.top - noBtn.offsetHeight - 15;
            }
            noBtn.style.left = `${yR.left + (yR.width - noBtn.offsetWidth) / 2}px`;
            noBtn.style.top  = `${top}px`;
        }

        /* ============================================
           –ö–ù–û–ü–ö–ê ¬´–ù–ï–¢¬ª ‚Äî —É–±–µ–≥–∞–µ—Ç
        ============================================ */
        function moveNoButton() {
            const pad  = 20;
            const btnW = noBtn.offsetWidth;
            const btnH = noBtn.offsetHeight;
            const hR   = headerArea.getBoundingClientRect();
            const yR   = yesBtn.getBoundingClientRect();

            let x, y, ok, tries = 0;

            do {
                x  = Math.random() * (innerWidth  - btnW - pad * 2) + pad;
                y  = Math.random() * (innerHeight - btnH - pad * 2) + pad;
                ok = true;

                // –Ω–µ –∑–∞–ª–µ–∑–∞—Ç—å –Ω–∞ —à–∞–ø–∫—É
                if (x < hR.right + 10 && x + btnW > hR.left - 10 &&
                    y < hR.bottom + 10 && y + btnH > hR.top  - 10) ok = false;

                // –Ω–µ –∑–∞–ª–µ–∑–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´–î–∞¬ª
                const g = 30;
                if (x < yR.right + g && x + btnW > yR.left - g &&
                    y < yR.bottom + g && y + btnH > yR.top  - g) ok = false;

            } while (!ok && ++tries < 60);

            noBtn.style.left = x + 'px';
            noBtn.style.top  = y + 'px';
        }

        /* ============================================
           –ö–õ–ò–ö ¬´–ù–ï–¢¬ª
        ============================================ */
        noBtn.addEventListener('click', () => {
            // –ö–Ω–æ–ø–∫–∞ ¬´–î–∞¬ª —Ä–∞—Å—Ç—ë—Ç
            yesScale += 0.35;
            yesBtn.style.transform = `scale(${yesScale})`;

            // –®–∞–ø–∫–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è (–º–∏–Ω–∏–º—É–º 0.28)
            headerScale = Math.max(0.28, headerScale - 0.07);
            headerArea.style.transform = `scale(${headerScale})`;

            // –°–∫—Ä—ã—Ç—å ¬´–ù–µ—Ç¬ª, –µ—Å–ª–∏ ¬´–î–∞¬ª —É–∂–µ –æ–≥—Ä–æ–º–Ω–∞—è
            if (yesScale > 5.5) noBtn.style.display = 'none';

            moveNoButton();
            question.textContent = phrases[phraseIdx];
            phraseIdx = (phraseIdx + 1) % phrases.length;
        });

        /* ============================================
           –°–ï–†–î–ï–ß–ö–ò üéâ
        ============================================ */
        function spawnHearts(count) {
            const colors = [
                '#ff4d6d','#ff758f','#ff85a1','#ff006e',
                '#e63946','#f4a0b5','#d62839','#ff477e'
            ];

            for (let i = 0; i < count; i++) {
                const el  = document.createElement('div');
                el.className = 'heart';

                const c = colors[Math.random() * colors.length | 0];
                el.innerHTML =
                    `<svg viewBox="0 0 24 24"><path fill="${c}" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 ` +
                    `2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 ` +
                    `19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;

                const size  = Math.random() * 32 + 16;               // 16-48px
                const dur   = Math.random() * 2.5 + 2;               // 2-4.5s
                const delay = Math.random() * 1.8;                    // 0-1.8s
                const drift = (Math.random() - 0.5) * 160;           // –≤–ª–µ–≤–æ-–≤–ø—Ä–∞–≤–æ
                const rot   = (Math.random() - 0.5) * 90;
                const endSc = Math.random() * 0.6 + 0.4;

                el.style.cssText += `
                    left: ${Math.random() * 100}vw;
                    --size: ${size}px;
                    --dur: ${dur}s;
                    --delay: ${delay}s;
                    --drift: ${drift}px;
                    --rot: ${rot}deg;
                    --end-scale: ${endSc};
                `;

                heartsBox.appendChild(el);
                setTimeout(() => el.remove(), (dur + delay) * 1000 + 200);
            }
        }

        /* ============================================
           –ö–õ–ò–ö ¬´–î–ê¬ª
        ============================================ */
        yesBtn.addEventListener('click', () => {
            quiz.classList.add('hidden');
            victory.classList.remove('hidden');

            spawnHearts(35);
            setTimeout(() => spawnHearts(20), 1800);
            setTimeout(() => spawnHearts(15), 3500);
        });

        /* ============================================
           –°–ë–†–û–°
        ============================================ */
        resetBtn.addEventListener('click', () => {
            yesScale    = 1;
            headerScale = 1;
            phraseIdx   = 0;
            yesBtn.style.transform    = 'scale(1)';
            headerArea.style.transform = 'scale(1)';
            noBtn.style.display       = 'block';
            question.textContent      = '–ë—É–¥–µ—à—å –ª–∏ —Ç—ã –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíå';

            heartsBox.innerHTML = '';

            victory.classList.add('hidden');
            quiz.classList.remove('hidden');

            requestAnimationFrame(() => setTimeout(setInitialPos, 80));
        });

        /* ---------- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ---------- */
        window.addEventListener('load',   () => setTimeout(setInitialPos, 300));
        window.addEventListener('resize', () => {
            if (!quiz.classList.contains('hidden')) setInitialPos();
        });
    })();
    </script>
</body>
</html>
